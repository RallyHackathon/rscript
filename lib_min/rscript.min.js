(function(){this.rsc=this.rsc||{};this.rsc.api=this.rsc.api||{};this.rsc.global=this})();rsc.api.launch=function(a){var c=Ext.Array.toArray(arguments),b=Ext.widget("container",{renderTo:Ext.getBody(),width:"100%",height:"100%"});Ext.Array.each(c,function(a){a.resolve(b)})};rsc.api.flow=function(a,c){var b=Ext.Array.toArray(arguments),d;a&&!a.isRscPromise?(d=a,b=Ext.Array.remove(b,d)):d={};d.layout="column";b=[d].concat(b);return rsc.api.stack.apply(rsc.stack,b)};
rsc.api.stack=function(a,c){var b,d=Ext.Array.toArray(arguments),e={};a&&!a.isRscPromise&&(e=a,d=Ext.Array.remove(d,e));var f=new rsc.Promise(function(a){e=Ext.applyIf({xtype:"container"},e);b=a.add(e);Ext.Array.each(d,function(a){a.resolve(b)})});f.add=function(a){b?a.resolve(b):d.push(a)};return f};rsc.api.text=function(a,c){var b=Ext.isString(a)?a:c||"",d=Ext.isNumber(a)?a:12;return new rsc.Promise(function(a){a.add({xtype:"container",html:b,style:{fontSize:d+"px"}})})};
rsc.Compiler=function(a){this.env=a||{}};rsc.Compiler.prototype={compile:function(a){if(!Ext.isString(a))throw Error("rsc.Compiler.compile, src is required");var c=[];Ext.Object.each(this.env,function(a){0!==a.indexOf("_")&&c.push(a)});c.push(a);return Function.apply(Function,c)},execute:function(a){var a=this.compile(a),c=[];Ext.Object.each(this.env,function(a,d){0!==a.indexOf("_")&&c.push(d)});return a.apply(null,c)}};rsc.Promise=function(a){this.resolve=a;this.isRscPromise=!0};
(function(){function a(){var a=document.getElementsByTagName("script"),b;Ext.Array.each(a,function(a){if("rscript"===a.type)return b=a.innerText,!1});return b}Rally.onReady(function(){var c=a();c&&(new rsc.Compiler(rsc.api)).execute(c)})})();
