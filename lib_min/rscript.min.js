(function(){this.rsc=this.rsc||{};this.rsc.api=this.rsc.api||{};this.rsc.global=this})();rsc.api.launch=function(a){var c=Ext.Array.toArray(arguments),b=Ext.widget("container",{renderTo:Ext.getBody(),width:"100%",height:"100%"});Ext.Array.each(c,function(a){a.resolve(b)})};rsc.api.flow=function(a,c){var b=Ext.Array.toArray(arguments),d;a&&!a.isRscPromise?(d=a,b=Ext.Array.remove(b,d)):d={};d.layout="column";b=[d].concat(b);return rsc.api.stack.apply(rsc.stack,b)};
rsc.api.addNew=function(a,c){var b,d=Ext.Array.toArray(arguments),d=Ext.Array.remove(d,a);Ext.isObject(a)&&(a=[a]);var e=new rsc.Promise(function(c){b=c.add({xtype:"rallyaddnew",recordTypes:a,ignoredRequiredFields:d,showAddWithDetails:!1});Ext.Object.each(e.pending,function(a,d){b.on(a,d)});e.pending={}});e.pending={};Object.defineProperty(e,"beforerecordadd",{set:function(a){if(b)b.on("beforerecordadd",a);else this.pending.beforerecordadd=a}});Object.defineProperty(e,"recordadd",{set:function(a){if(b)b.on("recordadd",
a);else this.pending.recordadd=a}});return e};rsc.api.cardboard=function(a,c){var b,d=new rsc.Promise(function(e){var f={xtype:"rallycardboard",types:[a],attribute:c};d.pending.filter&&(f.storeConfig={filters:[d.pending.filter]},delete d.pending.filter);b=e.add(f)});d.pending={};Object.defineProperty(d,"filter",{set:function(a){b?b.refresh({storeConfig:{filters:[a]}}):d.pending.filter=a}});return d};
rsc.api.iterationCombobox=function(){var a,c=new rsc.Promise(function(b){a=b.add({xtype:"rallyiterationcombobox"});Ext.Object.each(c.pending,function(b,c){a.on(b,c)});c.pending={}});c.pending={};Object.defineProperty(c,"value",{get:function(){return a&&a.getDisplayValue()}});Object.defineProperty(c,"ref",{get:function(){return a&&a.getValue()}});Object.defineProperty(c,"filter",{get:function(){return a&&a.getQueryFromSelected()}});Object.defineProperty(c,"ready",{set:function(b){if(a)a.on("ready",
b);else this.pending.ready=b}});Object.defineProperty(c,"change",{set:function(b){if(a)a.on("change",b);else this.pending.change=b}});return c};rsc.api.stack=function(a,c){var b,d=Ext.Array.toArray(arguments),e={};a&&!a.isRscPromise&&(e=a,d=Ext.Array.remove(d,e));var f=new rsc.Promise(function(a){e=Ext.applyIf({xtype:"container"},e);b=a.add(e);Ext.Array.each(d,function(a){a.resolve(b)})});f.add=function(a){b?a.resolve(b):d.push(a)};return f};
rsc.api.text=function(a,c){var b=Ext.isString(a)?a:c||"",d=Ext.isNumber(a)?a:12;return new rsc.Promise(function(a){a.add({xtype:"container",html:b,style:{fontSize:d+"px"}})})};rsc.Compiler=function(a){this.env=a||{}};
rsc.Compiler.prototype={compile:function(a){if(!Ext.isString(a))throw Error("rsc.Compiler.compile, src is required");var c=[];Ext.Object.each(this.env,function(a){0!==a.indexOf("_")&&c.push(a)});c.push(a);return Function.apply(Function,c)},execute:function(a){var a=this.compile(a),c=[];Ext.Object.each(this.env,function(a,d){0!==a.indexOf("_")&&c.push(d)});return a.apply(null,c)}};rsc.Promise=function(a){this.resolve=a;this.isRscPromise=!0};
(function(){function a(){Rally.getContextPath=function(){return"https://test7cluster.rallydev.com/slm"}}function c(){var a=document.getElementsByTagName("script"),c;Ext.Array.each(a,function(a){if("rscript"===a.type)return c=a.innerText,!1});return c}Rally.onReady(function(){a();var b=c();b&&(new rsc.Compiler(rsc.api)).execute(b)})})();
