(function(){this.rsc=this.rsc||{};this.rsc.api=this.rsc.api||{};this.rsc.global=this})();rsc.api.launch=function(a){var d=Ext.Array.toArray(arguments),b=Ext.widget("container",{renderTo:Ext.getBody(),width:"100%",height:"100%"});Ext.Array.each(d,function(a){a.resolve(b)})};rsc.api.flow=function(a,d){var b=Ext.Array.toArray(arguments),c;a&&!a.isRscPromise?(c=a,b=Ext.Array.remove(b,c)):c={};c.layout="column";b=[c].concat(b);return rsc.api.stack.apply(rsc.stack,b)};
rsc.api.addNew=function(a,d){var b=Ext.Array.toArray(arguments),b=Ext.Array.remove(b,a);Ext.isObject(a)&&(a=[a]);var c=new rsc.Promise(function(c){this.cmp=c.add({xtype:"rallyaddnew",recordTypes:a,ignoredRequiredFields:b,showAddWithDetails:!1})});c.defineEventProperties("beforerecordadd","recordadd");return c};
rsc.api.cardboard=function(a,d){var b=new rsc.Promise(function(b){var e={xtype:"rallycardboard",types:[a],attribute:d};this.pending.filter&&(e.storeConfig={filters:[this.pending.filter]},delete this.pending.filter);this.cmp=b.add(e)});Object.defineProperty(b,"filter",{set:function(a){this.cmp?this.cmp.refresh({storeConfig:{filters:[a]}}):this.pending.filter=a}});return b};
rsc.api.iterationCombobox=function(){var a=new rsc.Promise(function(a){this.cmp=a.add({xtype:"rallyiterationcombobox"})});a.defineEventProperties("ready","change");Object.defineProperty(a,"value",{get:function(){return a.cmp&&a.cmp.getDisplayValue()}});Object.defineProperty(a,"ref",{get:function(){return a.cmp&&a.cmp.getValue()}});Object.defineProperty(a,"filter",{get:function(){return a.cmp&&a.cmp.getQueryFromSelected()}});return a};
rsc.api.stack=function(a,d){var b=Ext.Array.toArray(arguments),c={};a&&!a.isRscPromise&&(c=a,b=Ext.Array.remove(b,c));var e=new rsc.Promise(function(a){c=Ext.applyIf({xtype:"container"},c);this.cmp=a.add(c);Ext.Array.each(b,function(a){a.resolve(this.cmp)},this)});e.add=function(a){this.cmp?a.resolve(this.cmp):b.push(a)};return e};
rsc.api.text=function(a,d){var b=Ext.isString(a)?a:d||"",c=Ext.isNumber(a)?a:12;return new rsc.Promise(function(a){this.cmp=a.add({xtype:"container",html:b,style:{fontSize:c+"px"}})})};rsc.Compiler=function(a){this.env=a||{}};
rsc.Compiler.prototype={compile:function(a){if(!Ext.isString(a))throw Error("rsc.Compiler.compile, src is required");var d=[];Ext.Object.each(this.env,function(a){0!==a.indexOf("_")&&d.push(a)});d.push(a);return Function.apply(Function,d)},execute:function(a){var a=this.compile(a),d=[];Ext.Object.each(this.env,function(a,c){0!==a.indexOf("_")&&d.push(c)});return a.apply(null,d)}};
rsc.Promise=function(a){this._resolve=a||function(){};this.pending={};Object.defineProperty(this,"isRscPromise",{value:!0,enumerable:!0,writable:!1,configurable:!1})};
rsc.Promise.prototype={_resolvePending:function(){this.cmp&&Ext.Object.each(this.pending,function(a,d){this.cmp.on(a,d)},this);this.pending={}},resolve:function(){this._resolve.apply(this,arguments);this._resolvePending()},defineEventProperties:function(a){var d=Ext.Array.toArray(arguments);Ext.Array.each(d,function(a){Object.defineProperty(this,a,{set:function(c){if(this.cmp)this.cmp.on(a,c);else this.pending[a]=c}})},this)}};
(function(){function a(){Rally.getContextPath=function(){return"https://test7cluster.rallydev.com/slm"}}function d(){var a=document.getElementsByTagName("script"),c;Ext.Array.each(a,function(a){if("rscript"===a.type)return c=a.innerText,!1});return c}Rally.onReady(function(){a();var b=d();b&&(new rsc.Compiler(rsc.api)).execute(b)})})();
