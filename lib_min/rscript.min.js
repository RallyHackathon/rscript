(function(){this.rsc=this.rsc||{};this.rsc.api=this.rsc.api||{};this.rsc.global=this})();rsc.api.launch=function(a){var b=Ext.Array.toArray(arguments),c=Ext.widget("container",{renderTo:Ext.getBody(),width:"100%",height:"100%"});Ext.Array.each(b,function(a){a.resolve(c)})};rsc.api.flow=function(a,b){var c=Ext.Array.toArray(arguments),d;a&&!a.isRscPromise?(d=a,c=Ext.Array.remove(c,d)):d={};d.layout="column";c=[d].concat(c);return rsc.api.stack.apply(rsc.stack,c)};
rsc.api.addNew=function(a,b){Ext.isObject(a)&&(a=[a]);Ext.isObject(b)&&(b=[b]);var c=new rsc.Promise(function(c){this.cmp=c.add({xtype:"rallyaddnew",recordTypes:a,ignoredRequiredFields:b,showAddWithDetails:!1})});c.defineEventProperties("beforerecordadd","recordadd");return c};
rsc.api.cardboard=function(a,b){Ext.isObject(a)&&(a=[a]);var c=new rsc.Promise(function(c){var e={xtype:"rallycardboard",types:a,attribute:b};this.pending.filter&&(e.storeConfig={filters:[this.pending.filter]},delete this.pending.filter);this.cmp=c.add(e)});c.surfaceMethods("refresh");Object.defineProperty(c,"filter",{set:function(a){this.cmp?this.cmp.refresh({storeConfig:{filters:[a]}}):this.pending.filter=a}});return c};
rsc.api.iterationCombobox=function(){var a=new rsc.Promise(function(a){this.cmp=a.add({xtype:"rallyiterationcombobox"})});a.defineEventProperties("ready","change");a.surfaceMethods({getDisplayValue:"value",getValue:"ref",getQueryFromSelected:"filter"});return a};
rsc.api.stack=function(a,b){var c=Ext.Array.toArray(arguments),d={};a&&!a.isRscPromise&&(d=a,c=Ext.Array.remove(c,d));var e=new rsc.Promise(function(a){d=Ext.applyIf({xtype:"container"},d);this.cmp=a.add(d);Ext.Array.each(c,function(a){a.resolve(this.cmp)},this)});e.add=function(a){this.cmp?a.resolve(this.cmp):c.push(a)};return e};
rsc.api.text=function(a,b){var c=Ext.isString(a)?a:b||"",d=Ext.isNumber(a)?a:12;return new rsc.Promise(function(a){this.cmp=a.add({xtype:"container",html:c,style:{fontSize:d+"px"}})})};rsc.Compiler=function(a){this.env=a||{}};
rsc.Compiler.prototype={compile:function(a){if(!Ext.isString(a))throw Error("rsc.Compiler.compile, src is required");var b=[];Ext.Object.each(this.env,function(a){0!==a.indexOf("_")&&b.push(a)});b.push(a);return Function.apply(Function,b)},execute:function(a){var a=this.compile(a),b=[];Ext.Object.each(this.env,function(a,d){0!==a.indexOf("_")&&b.push(d)});return a.apply(null,b)}};
rsc.Promise=function(a){this._resolve=a||function(){};this.pending={};Object.defineProperty(this,"isRscPromise",{value:!0,enumerable:!0,writable:!1,configurable:!1})};
rsc.Promise.prototype={_resolvePending:function(){this.cmp&&Ext.Object.each(this.pending,function(a,b){this.cmp.on(a,b)},this);this.pending={}},resolve:function(){this._resolve.apply(this,arguments);this._resolvePending()},surfaceMethods:function(a){var b;Ext.isString(a)?(b={},b[a]=a):Ext.isArray(a)?(b={},Ext.Array.each(a,function(a){b[a]=a})):b=a;Ext.Object.each(b,function(a,b){this[b]=function(){if(this.cmp&&Ext.isFunction(this.cmp[a]))return this.cmp[a].apply(this.cmp,arguments)}},this)},defineEventProperties:function(a){var b=
Ext.Array.toArray(arguments);Ext.Array.each(b,function(a){Object.defineProperty(this,a,{set:function(b){if(this.cmp)this.cmp.on(a,b);else this.pending[a]=b}})},this)}};(function(){function a(){Rally.getContextPath=function(){return"https://test7cluster.rallydev.com/slm"}}function b(){var a=document.getElementsByTagName("script"),b;Ext.Array.each(a,function(a){if("rscript"===a.type)return b=a.innerText,!1});return b}Rally.onReady(function(){a();var c=b();c&&(new rsc.Compiler(rsc.api)).execute(c)})})();
